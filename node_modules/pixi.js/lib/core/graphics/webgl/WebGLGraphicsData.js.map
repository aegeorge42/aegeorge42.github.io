{"version":3,"sources":["../../../../src/core/graphics/webgl/WebGLGraphicsData.js"],"names":["WebGLGraphicsData","gl","shader","attribsState","color","points","indices","buffer","GLBuffer","createVertexBuffer","indexBuffer","createIndexBuffer","dirty","nativeLines","glPoints","glIndices","vao","VertexArrayObject","addIndex","addAttribute","attributes","aVertexPosition","FLOAT","aColor","reset","length","upload","Float32Array","Uint16Array","destroy"],"mappings":";;;;AAAA;;;;;;;;AAEA;;;;;;;IAOqBA,iB;AAEjB;;;;;AAKA,6BAAYC,EAAZ,EAAgBC,MAAhB,EAAwBC,YAAxB,EACA;AAAA;;AACI;;;;;AAKA,SAAKF,EAAL,GAAUA,EAAV;;AAEA;AACA;;;;AAIA,SAAKG,KAAL,GAAa,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAb,CAbJ,CAa4B;;AAExB;;;;AAIA,SAAKC,MAAL,GAAc,EAAd;;AAEA;;;;AAIA,SAAKC,OAAL,GAAe,EAAf;AACA;;;;AAIA,SAAKC,MAAL,GAAc,qBAAOC,QAAP,CAAgBC,kBAAhB,CAAmCR,EAAnC,CAAd;;AAEA;;;;AAIA,SAAKS,WAAL,GAAmB,qBAAOF,QAAP,CAAgBG,iBAAhB,CAAkCV,EAAlC,CAAnB;;AAEA;;;;AAIA,SAAKW,KAAL,GAAa,IAAb;;AAEA;;;;AAIA,SAAKC,WAAL,GAAmB,KAAnB;;AAEA,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,SAAL,GAAiB,IAAjB;;AAEA;;;;AAIA,SAAKb,MAAL,GAAcA,MAAd;;AAEA,SAAKc,GAAL,GAAW,IAAI,qBAAOC,iBAAX,CAA6BhB,EAA7B,EAAiCE,YAAjC,EACVe,QADU,CACD,KAAKR,WADJ,EAEVS,YAFU,CAEG,KAAKZ,MAFR,EAEgBL,OAAOkB,UAAP,CAAkBC,eAFlC,EAEmDpB,GAAGqB,KAFtD,EAE6D,KAF7D,EAEoE,IAAI,CAFxE,EAE2E,CAF3E,EAGVH,YAHU,CAGG,KAAKZ,MAHR,EAGgBL,OAAOkB,UAAP,CAAkBG,MAHlC,EAG0CtB,GAAGqB,KAH7C,EAGoD,KAHpD,EAG2D,IAAI,CAH/D,EAGkE,IAAI,CAHtE,CAAX;AAIH;;AAED;;;;;8BAGAE,K,oBACA;AACI,SAAKnB,MAAL,CAAYoB,MAAZ,GAAqB,CAArB;AACA,SAAKnB,OAAL,CAAamB,MAAb,GAAsB,CAAtB;AACH,G;;AAED;;;;;8BAGAC,M,qBACA;AACI,SAAKZ,QAAL,GAAgB,IAAIa,YAAJ,CAAiB,KAAKtB,MAAtB,CAAhB;AACA,SAAKE,MAAL,CAAYmB,MAAZ,CAAmB,KAAKZ,QAAxB;;AAEA,SAAKC,SAAL,GAAiB,IAAIa,WAAJ,CAAgB,KAAKtB,OAArB,CAAjB;AACA,SAAKI,WAAL,CAAiBgB,MAAjB,CAAwB,KAAKX,SAA7B;;AAEA,SAAKH,KAAL,GAAa,KAAb;AACH,G;;AAED;;;;;8BAGAiB,O,sBACA;AACI,SAAKzB,KAAL,GAAa,IAAb;AACA,SAAKC,MAAL,GAAc,IAAd;AACA,SAAKC,OAAL,GAAe,IAAf;;AAEA,SAAKU,GAAL,CAASa,OAAT;AACA,SAAKtB,MAAL,CAAYsB,OAAZ;AACA,SAAKnB,WAAL,CAAiBmB,OAAjB;;AAEA,SAAK5B,EAAL,GAAU,IAAV;;AAEA,SAAKM,MAAL,GAAc,IAAd;AACA,SAAKG,WAAL,GAAmB,IAAnB;;AAEA,SAAKI,QAAL,GAAgB,IAAhB;AACA,SAAKC,SAAL,GAAiB,IAAjB;AACH,G;;;;;kBApHgBf,iB","file":"WebGLGraphicsData.js","sourcesContent":["import glCore from 'pixi-gl-core';\n\n/**\n * An object containing WebGL specific properties to be used by the WebGL renderer\n *\n * @class\n * @private\n * @memberof PIXI\n */\nexport default class WebGLGraphicsData\n{\n    /**\n     * @param {WebGLRenderingContext} gl - The current WebGL drawing context\n     * @param {PIXI.Shader} shader - The shader\n     * @param {object} attribsState - The state for the VAO\n     */\n    constructor(gl, shader, attribsState)\n    {\n        /**\n         * The current WebGL drawing context\n         *\n         * @member {WebGLRenderingContext}\n         */\n        this.gl = gl;\n\n        // TODO does this need to be split before uploading??\n        /**\n         * An array of color components (r,g,b)\n         * @member {number[]}\n         */\n        this.color = [0, 0, 0]; // color split!\n\n        /**\n         * An array of points to draw\n         * @member {PIXI.Point[]}\n         */\n        this.points = [];\n\n        /**\n         * The indices of the vertices\n         * @member {number[]}\n         */\n        this.indices = [];\n        /**\n         * The main buffer\n         * @member {WebGLBuffer}\n         */\n        this.buffer = glCore.GLBuffer.createVertexBuffer(gl);\n\n        /**\n         * The index buffer\n         * @member {WebGLBuffer}\n         */\n        this.indexBuffer = glCore.GLBuffer.createIndexBuffer(gl);\n\n        /**\n         * Whether this graphics is dirty or not\n         * @member {boolean}\n         */\n        this.dirty = true;\n\n        /**\n         * Whether this graphics is nativeLines or not\n         * @member {boolean}\n         */\n        this.nativeLines = false;\n\n        this.glPoints = null;\n        this.glIndices = null;\n\n        /**\n         *\n         * @member {PIXI.Shader}\n         */\n        this.shader = shader;\n\n        this.vao = new glCore.VertexArrayObject(gl, attribsState)\n        .addIndex(this.indexBuffer)\n        .addAttribute(this.buffer, shader.attributes.aVertexPosition, gl.FLOAT, false, 4 * 6, 0)\n        .addAttribute(this.buffer, shader.attributes.aColor, gl.FLOAT, false, 4 * 6, 2 * 4);\n    }\n\n    /**\n     * Resets the vertices and the indices\n     */\n    reset()\n    {\n        this.points.length = 0;\n        this.indices.length = 0;\n    }\n\n    /**\n     * Binds the buffers and uploads the data\n     */\n    upload()\n    {\n        this.glPoints = new Float32Array(this.points);\n        this.buffer.upload(this.glPoints);\n\n        this.glIndices = new Uint16Array(this.indices);\n        this.indexBuffer.upload(this.glIndices);\n\n        this.dirty = false;\n    }\n\n    /**\n     * Empties all the data\n     */\n    destroy()\n    {\n        this.color = null;\n        this.points = null;\n        this.indices = null;\n\n        this.vao.destroy();\n        this.buffer.destroy();\n        this.indexBuffer.destroy();\n\n        this.gl = null;\n\n        this.buffer = null;\n        this.indexBuffer = null;\n\n        this.glPoints = null;\n        this.glIndices = null;\n    }\n}\n"]}